!function(){"use strict";D.addEventListener("DOMContentLoaded",function(){W.addEventListener("scroll",()=>{let e=D.querySelector(".js-header");(W.pageYOffset|D.body.scrollTop)>200?e.classList.add("is-fixed"):e.classList.remove("is-fixed")});const e=D.querySelector(".js-mobile-menu"),t=D.querySelector(".js-open-mobile-menu"),s=D.querySelector(".js-close-mobile-menu"),o=()=>{e.classList.toggle("is-active"),t.classList.toggle("is-active")};t.addEventListener("click",o),s.addEventListener("click",o)});let e=D.querySelectorAll(".js-input");D.addEventListener("DOMContentLoaded",function(){e.forEach(e=>{let t=e.closest(".form-field");e.addEventListener("focus",function(e){t.classList.remove("form-field--error"),t.classList.add("form-field--focused")}),e.addEventListener("blur",function(s){""===e.value&&t.classList.remove("form-field--focused")})}),e.forEach(e=>{let t=e.closest(".form-field");""===e.value?t.classList.remove("form-field--focused"):t.classList.add("form-field--focused")})});window.validatePhone=(e=>{let t=e.value.replace(/[^\d.]/g,""),s=Number(e.getAttribute("minlength")),o=e.closest(".form-group");t.length===s?(o.classList.remove("has-danger"),o.classList.add("has-success")):(o.classList.remove("has-success"),o.classList.add("has-danger"))}),D.addEventListener("DOMContentLoaded",function(){for(const e of document.querySelectorAll("input[data-slots]")){const t=e.getAttribute("data-mask"),s=new Set(e.dataset.slots||"_"),o=(e=>Array.from(t,(t,o)=>s.has(t)?e=o+1:e))(0),r=[...t].findIndex(e=>s.has(e)),a=new RegExp(e.dataset.accept||"\\d","g"),c=e=>(e=e.match(a)||[],Array.from(t,t=>(e[0]===t||s.has(t))&&e.shift()||t)),l=()=>{const[t,a]=[e.selectionStart,e.selectionEnd].map(t=>(t=c(e.value.slice(0,t)).findIndex(e=>s.has(e)))<0?o[o.length-1]:n?o[t-1]||r:t);e.value=c(e.value).join``,e.setSelectionRange(t,a),n=!1};let n=!1;e.addEventListener("keydown",e=>n="Backspace"===e.key),e.addEventListener("input",l),e.addEventListener("focus",l),e.addEventListener("blur",()=>e.value===t&&(e.value=""))}});let t=document.querySelectorAll(".js-select ");const s=()=>{t.forEach(e=>{new NiceSelect(e,{searchable:!1});e.addEventListener("change",()=>{let t=e.closest(".form-field");t.classList.remove("has-danger"),t.querySelector(".form-field__label-select").style.opacity="0"})})};window.selectInit=s,D.addEventListener("DOMContentLoaded",function(){s()});const o=e=>{let t=e.closest(".js-form").querySelector(".js-form-submit");e.checked?t.classList.remove("is-disabled"):t.classList.add("is-disabled")};D.addEventListener("DOMContentLoaded",function(){D.querySelectorAll(".js-checkbox-rules").forEach(e=>{o(e),e.addEventListener("change",()=>{o(e)})})}),D.addEventListener("DOMContentLoaded",function(){D.querySelectorAll(".js-form").forEach(e=>{let t=new Pristine(e),s=e.querySelector(".js-phone");e.addEventListener("submit",async o=>{o.preventDefault();let r=t.validate();if(s&&validatePhone(s),r){let t=e.getAttribute("action"),s=e.getAttribute("method"),o=e.getAttribute("data-thank"),r=e.getAttribute("data-redirect"),a=function(e){let t={},s=new FormData(e);for(let e of s.keys())t[e]=s.get(e);return t};if(e.reset(),r)document.location.href=r;else if(o){let e=D.querySelectorAll(".js-popup");Array.from(e).forEach(e=>{e.classList.remove("is-show")}),document.querySelector(o).classList.add("is-show"),document.querySelector(o).closest(".js-popups-wrapper").classList.add("is-show"),document.querySelector(o).closest(".js-popups-wrapper").classList.add("popups-wrapper--thank")}await fetch(t,{method:s,body:JSON.stringify(a(event.target)),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(t){if(t.ok)if(console.log("successfully"),e.reset(),r)document.location.href=r;else if(o){let e=D.querySelectorAll(".js-popup");Array.from(e).forEach(e=>{e.classList.remove("is-show")}),document.querySelector(o).classList.add("is-show"),document.querySelector(o).closest(".js-popups-wrapper").classList.add("is-show"),document.querySelector(o).closest(".js-popups-wrapper").classList.add("popups-wrapper--thank")}}).then(function(e){console.log(e)}).catch(function(e){console.warn(e)})}}),s&&s.addEventListener("keyup",function(){validatePhone(s)})})}),D.addEventListener("DOMContentLoaded",function(){let e=D.querySelectorAll(".js-popup-link"),t=D.querySelectorAll(".js-popup"),s=D.querySelector(".js-popups-wrapper"),o=D.querySelectorAll(".js-popup-close"),r=null;if(""!==location.hash){let e=location.hash.substr(1);s.classList.add("is-show"),a(e,elem),D.querySelector('.js-popup[data-block="'+target+'"]')}function a(e,t){fetch(e,{method:"GET"}).then(function(e){if(e.ok)return console.log("successfully"),e.text()}).then(function(e){t.querySelector(".js-fetch-wrapper").innerHTML=e}).catch(function(e){console.warn(e)})}e.forEach(e=>{e.addEventListener("click",function(o){o.preventDefault(),function(e,o,c){s.classList.add("is-show");const l=D.querySelector('.js-popup[data-block="'+e+'"]');Array.from(t).forEach(e=>{e.classList.remove("is-show")}),l.classList.add("is-show");let n=l.querySelector(".js-iframe");o?(history.pushState({},"",o),a(o,l),r="href",s.classList.add("popups-wrapper--fetch")):n&&(n.setAttribute("src",c),s.classList.add("popups-wrapper--video"))}(e.dataset.link,e.dataset.href,e.dataset.src)})}),o.forEach(e=>{e.addEventListener("click",function(e){Array.from(t).forEach(e=>{e.classList.remove("is-show")}),s.classList.remove("is-show"),s.classList.remove("popups-wrapper--fetch"),s.classList.remove("popups-wrapper--video"),s.classList.remove("popups-wrapper--thank"),D.querySelector(".js-fetch-wrapper").innerHTML="";let o=D.querySelector(".js-iframe");o&&o.setAttribute("src",""),"href"===r&&(history.back(),r=null)})})})}();
//# sourceMappingURL=main.js.map
